% ******** Приклад оформлення документа за ДСТУ 3008-95 ********
% ******************** автор: Тавров Д. Ю. *********************

% зазначаємо стильовий файл, який будемо використовувати
\documentclass{../../dstu}
% починаємо верстку документа
\begin{document}

% створимо титульний аркуш
% за допомогою спеціальної команди
% \maketitlepage{params},
% де params --- це розділені комами пари "параметр={значення}"
\maketitlepage{
% StudentName --- прізвище, ініціали студента
	StudentName={Бубела Д. В.},
% StudentMale --- стать студента (true, якщо чоловік, false --- якщо жінка)
	StudentMale=true,
% StudentGroup --- група студента
	StudentGroup={КМ-82},
% Title --- назва
	Title={Курсова робота\\із дисципліни \invcommas{Автоматизоване тестування програмного забезпечення}\\},
% SupervisorDegree --- науковий ступінь, учене звання керівника роботи
% якщо наукового ступеня немає, можна відповідний рядочок пропустити
	SupervisorDegree={\textit{старший викладач}},
% SupervisorName --- прізвище, ініціали керівника роботи
	SupervisorName={\textit{Бай Ю. П.}}
}
% створюємо зміст
\tableofcontents

% створюємо Мету роботи
\goal
Узагальнити знання отримані з курсу \invcommas{Автоматизоване тестування програмного забезпечення}. Протестувати веб-застосунок на модульному рівні за допомогою бібліотеки unittest, на приймальному рівні за допомогою Selenium WebDriver та http запитів не використовуючи Selenium, за допомогою бібліотеки requests.

Розробити специфікацію до веб-застосунку. Перевірити роботу тестових модулів.

\chapter{Реалізація завдання}
\label{chap:real}

\section{Умова завдання}
\label{sec:condititon}

\textbf{Завдання 2}

4) В одновимірному масиві, що складається з n елементів, обчислити середньоквадратичне значення елементів масиву.

Програма приймає на вхід список чисел. Якщо деякі з них не існують, значення None, вони пропускаються. На пустий масив відповідає нічим (None).
\section{Специфікація веб-застосунку}
\label{sec:scep}
\textbf{Специфікація}

Веб-застосунок призначений для отримання відповідей на введені вхідні дані відповідно до завдання описаного вище, складається з однієї веб-сторінки і має наступну функціональність:

\begin{enumerate}[{label={\arabic*.}}]
    \item Довільний користувач може переглянути умову завдання, яке розташоване в центральній верхній частині сторінки, та існуючі відповіді до цього завдання.
    \item Sign Up: новий користувач може зареєструватися, увівши свої значення в поля Display Name, Email, Password та натиснувши кнопку \textbf{Sign Up}. При виконання умови, що всі поля заповнені і значення Email –  унікальне серед всіх e-mail на backend, реєстрація буде виконана успішно,  користувач автоматично входить в свій обліковий запис, і на сторінці з’являється кнопка \textbf{Log Out}.
    \item Користувач може вийти зі свого облікового запису, натиснувши кнопку \textbf{Log Out}.
    \item \textbf{Log In}: зареєстрований користувач може увійти в свій обліковий запис. Для цього необхідно ввести правильні e-mail та пароль в поля Email та Password , після чого натиснути кнопку \textbf{Log In}.
    \item Користувач, що увійшов в свій обліковий запис, може вводити вхідні дані для завдання та отримувати відповідь. Для цього користувачу необхідно написати в полях вхідні числові дані, та натиснути кнопку \textbf{Обчислити}.
    \item До натискання кнопки \textbf{Обчислити} користувач може додавати нові числа у спливаючі поля та видаляти дані в існуючих.
    \item Користувач, що увійшов в свій обліковий запис, може видаляти створену ним відповідь, натиснувши кнопку \textbf{Remove}, розташовану справа від потрібної відповіді.
    \item За замовчуванням на сторінці присутні дані результатів попередніх виконань завдань “Input: [2, 4, 16, 256] Answer: 128.2692480682724”, “Input: [1, -1, 4, -4] Answer: 2.9154759474226504”, створені користувачами Linus T. та Iryna K., які мають наступні Email та Password:
    torvalds@osdl.org,  `kernel`
    kostushkoia5@gmail.com,  `numericalerror`.
    \item Для спрощення задачі веб-застосунок не зберігає дані постійно. При зупинці backend всі дані будуть втрачені. Тестові користувачі та коментарі створюються автоматично при кожному запуску backend. 
\end{enumerate}

\section{Розробка і реалізація тест-кейсів}

\subsection{test_1.py}

\begin{table}{|c|m{7cm}|m{2.3cm}|m{2.7cm}|}{Тест-кейси test_1}{table:table1}
	{\hline
	{\centering Тест} & {\centering Мета} & {\centering Вхідні данні} & {\centering Очікуваний результат} \\
	\hline}
	test_valid_input & Перевірити виконання на цілих числах & [3, 13, 33, 87] & 47\\
	\hline
	test_zeros & Перевірити виконання з нулями & [0, 0, 0] & 0\\
	\hline 
	test_negative & Перевірити виконання  з від'ємними числами & [-99, -99, -1] & 80.83522334\\
	\hline 
	test_real & Перевірити виконання функції з дійсними числами& [0.3331, 5.032, -8989] & 5189.80238647\\
	\hline
	test_no_input & Перевірити виконання функції без даних & [] & None\\
	\hline
	test_type_error & Перевірити виконання функції з некоректними даними & ['1', 90, 4] & TypeError\\
\end{table}

\subsection{test_2.py}

Тестування за допомогою http запитів. Бібліотека requests

\begin{enumerate}
 \item Тестування входу зареєстрованого користувача.
 \begin{enumerate}
 \item Чи присутнє ім'я у відповіді на вхід.
 \item Чи присутній JSON Web Token у відповіді. Він необхідний для здійснення авторизованих запитів.
 \item Чи присутнє id користувача у відповіді
 \end{enumerate}
 \item Перевірка входу з невірним паролем
 \item Перевірка входу з невірною поштою
 \item Чи можна створити допис з відповіддю від користувача, даних для входу якого ми не знаємо.
 \item Чи можна вийти з облікового запису. Перевірка відповіді від кнопки \textbf{Log Out}
 \item Перевірка створення коментаря з аккаунту зареєстрованого користувача. Перевірка всіх дописів залишених на сайті. Перевірка відповіді.
 \item Перевірка реєстрації нового користувача.
 \item Чи може користувач зареєструватися повторно з однаковими даними.
\end{enumerate}

\subsection{test_3.py}

Тестування за допомогою Selenium WebDriver

\begin{enumerate}
 \item Перевіряє, що анонімний користувач бачить на сторінці:
    \begin{enumerate}
    		\item Напис "Курсова робота".
        \item Заголовок питання, який співпадає з очікуваним заголовком.
        \item Попередні відповіді, які існують за замовчуванням (переконатися, що співпадають тексти та відповідні автори коментарів).
        \item Кнопки Sign Up, Log In.
        \item Поля для введення Display Name, Email та Password та їх підписи.
    \end{enumerate}
  \item Перевіряє, що новий користувач може зареєструватись, увівши значення Display Name, Email та Password:
\begin{enumerate}
\item Протестувати, що у випадку успішної реєстрації користувач автоматично входить у свій обліковий запис, на сторінці з’являється його Display Name та кнопка Log Out.
\item Протестувати, що натискання на кнопку Log Out призводить до виходу користувача зі свого облікового запису
\item  Протестувати, що при неунікальному значенні Email на backend створення нового користувача не відбувається, веб-застосунок не переходить в стан зареєстрованого користувача. 

\end{enumerate}
\item Перевіряє, що зареєстрований користувач, увівши правильні значення Email та Password та натиснувши на кнопку Log In, входить до свого облікового запису. Протестувати, що при введенні некоректного Email або Password  — користувач не входить до свого облікового запису.
\item Перевіряє, що якщо користувач знаходиться у своєму обліковому запису, то на сторінці є поля для введення вхідних даниз на завдання та кнопка \textbf{Обчислити}.
\item Перевіряє, що користувач, який знаходиться у своєму обліковому запису, може виконати завдання: 
\begin{enumerate}
\item Після введення вхідних даних та натискання на кнопку \textbf{Обчислити} його вхідні дані й відповідь відображається у списку всіх попередніх результатів.
\item Перевірити чи збігається відповідь з очікуваною.

\end{enumerate}
\item Перевіряє, що користувач, який знаходиться у своєму обліковому запису, може ввести ще одні дані: 
\begin{enumerate}
\item Переконатися, що вдалося ще одні дані.
\item Переконатися, що результат знаходиться після попереднього результату, створеного даним користувачем.

\end{enumerate}
\item Перевіряє, що користувач, який знаходиться у своєму обліковому запису, може видалити створений ним коментар: 
\begin{enumerate}
\item Переконатися, що видаляється потрібний коментар.
\item Переконатися, що усі інші коментарі, створені даним користувачем та іншими користувачами, залишилися на місці.

\end{enumerate}

\item Перевіряє, що одночасно у своїх облікових записах можуть бути активними два різних користувача:
\begin{enumerate}
    \item Увійти в браузері driver1 в обліковий запис користувача user1 та ввести [1, 2, 3].
    \item В автоматичному режимі запустити ще один браузер driver2, виконати Log In від імені користувача user2 та ввести [11, 22, 33]. Протестувати, що в браузері driver2 присутні обидва коментаря — comment1 та comment2.
    \item В браузері driver1 від імені користувача user1 додати дані та видалити їх. Протестувати, що в браузері driver1, присутні однакові відповіді що й в браузері driver2.
 \item Закрити обидва браузера, порівняти відповіді з попередніми зареєстрованих користувачів.
\end{enumerate}


\end{enumerate}


% створюємо Висновки
\conclusions
В даній роботі узагальнилися знання по курсу \invcommas{Автоматизоване тестування програмного забезпечення}. Провелося тестування веб-застосунку на модульному та приймальному рівнях. Були використані бібліотеки: unittest, subprocess, selenium, requests, tornado.

Наочно можна побачити різницю між модульним і приймальним тестуванням: якщо перший тип тестує тільки основну програми, то другий певним чином ближче до користувача і імітує його роботу. Проте перший виконується миттєво, то на другий треба значно більше часу, відповідно непередбачувана поведінка програми виявлена за допомогою модульного тестування ``дешевша'' і займає менше часу для виправлення та регресійного тестування.

Можна відмітити необхідність у тестуванні за допомогою http запитів, оскільки з їх допомогою можна перевірити поведінку веб-застосунку в ситуаціях, в які при звичайному тестуванні було б потрабити важко, або неможливо. Наприклад створення запису незареєстрованим користувачем, що є потенційною небезпекою.

Фінальне тестування за допомогою Selenium WebDriver дозволяло пройти шляхом користувача і віднайти непередбачувану поведінку програми на яку він міг натрапити.

% створюємо перелік посилань
\begin{thebibliography}
	\bibitem{subprocess} Python Software Foundation. subprocess — Subprocess management
[Електронний ресурс] / Python Software Foundation.. — 2020. — Режим доступу
до ресурсу: \url{https://docs.python.org/3/library/subprocess.html.}.
    \bibitem{requests}Requests: HTTP for Humans™ [Електронний ресурс] // v2.25.1. – 2020. – Режим доступу до ресурсу: \url{https://requests.readthedocs.io/en/master/}.

	\bibitem{seleniumref} \label{} Selenium IDE API Reference [Електронний ресурс]. – 2019. – Режим доступу до ресурсу: \url{https://www.selenium.dev/selenium-ide/docs/en/api/commands}.
	\bibitem{xpathdocs} MDN contributors. XSLT/XPath Reference [Електронний ресурс] / MDN contributors. – 2020. – Режим доступу до ресурсу: \url{https://developer.mozilla.org/en-US/docs/Web/XPath}.
	\bibitem{unittest} Python Software Foundation.unittest — Unit testing framework[Електронний ресурс] / Python Software Foundation.. — 2020. — Режим доступу до
ресурсу: \url{ https://docs.python.org/3/library/unittest.html}.
    \bibitem{tornado} FriendFeed. Structure of a Tornado web application [Електронний ресурс] / FriendFeed // 6.1.0. – 2019. – Режим доступу до ресурсу: \url{https://www.tornadoweb.org/en/stable/guide/structure.html}.
\end{thebibliography}

\append{Текст модулів, що реалізують автоматичне тестування}

\listing{test_1.py}{SRC/test_1.py}

\listing{test_2.py}{SRC/test_2.py}

\listing{test_3.py}{SRC/test_3.py}

\append{Скріншоти результатів виконання автотестів}
\begin{figure}[!htp]
	\centering
	\includegraphics[scale=0.85]{PNG/test_1.png}
	\caption{Скріншот тестування test_1.py}
	\label{fig:test1}
\end{figure}

\begin{figure}[!htp]
	\centering
	\includegraphics[scale=0.65]{PNG/test_2.png}
	\caption{Скріншот тестування test_2.py}
	\label{fig:test2}
\end{figure}

\begin{figure}[!htp]
	\centering
	\includegraphics[scale=0.65]{PNG/test_3.png}
	\caption{Скріншот тестування test_3.py}
	\label{fig:test3}
\end{figure}

\end{document}
